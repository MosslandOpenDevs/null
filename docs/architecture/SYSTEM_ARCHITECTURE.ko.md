# 시스템 아키텍처

## 개요

NULL은 순차적으로 작동하는 네 개의 핵심 엔진으로 운영됩니다: **제네시스 → 시뮬레이션 → 문서화 → 저장**.

## 핵심 엔진

### 1. 제네시스 노드
세계 구축 엔진. 시드 프롬프트를 받아 전체 시뮬레이션 환경을 생성합니다.

**책임:**
- 시드 프롬프트를 세계 매개변수(시대, 기술 수준, 사회 구조)로 파싱
- 배경, 신념, 동기를 가진 초기 에이전트 페르소나 생성
- 시작 조건 설정 (자원, 권력 역학, 정보 비대칭)
- 시뮬레이션 규칙과 제약 조건 정의

**입력:** 시드 프롬프트 (예: "사이버펑크 조선 왕조, 2145년")
**출력:** 세계 설정 + N개 에이전트 페르소나 + 초기 상태

### 2. 하이브 마인드 엔진
집단 지성 레이어. 에이전트들이 협력하여 문명을 기록하는 살아있는 위키를 유지합니다.

**책임:**
- 에이전트에 의한 실시간 위키 페이지 생성 및 편집
- 합의 기반 사실 확립 (정전 vs. 전설)
- 에이전트 상호작용으로부터 지식 그래프 구축
- 모순 감지 및 해결 프로토콜

**저장소:** PostgreSQL + pgvector를 사용한 위키 항목 전반의 시맨틱 검색.

### 3. 외부 현실 주입
실제 세계의 외부 데이터를 주입하여 시뮬레이션과 연결합니다.

**책임:**
- 검색 API(Tavily/Perplexity)를 통한 실시간 뉴스, 연구, 데이터 가져오기
- 외부 이벤트를 세계 내 이벤트로 변환
- 정보 과부하 방지를 위한 주입 빈도 제어 유지
- 외부 데이터가 에이전트 네트워크를 통해 전파되는 방식 추적

### 4. 시간 왜곡 엔진
시뮬레이션의 시간 흐름을 제어합니다.

**책임:**
- 시뮬레이션 시간 가속 또는 감속 (실제 1시간 = 시뮬레이션 N년)
- 시대 전환 트리거 (기술 혁명, 사회 변동)
- 세대 이벤트 스케줄링 (지도자 교체, 문화 운동)
- 시간 기반 에이전트 신념의 쇠퇴와 진화 관리

## 아키텍처 흐름

```
[시드 프롬프트]
    ↓
[제네시스 노드] → 세계 설정 + 에이전트 페르소나
    ↓
[시뮬레이션 루프]
    ├── 에이전트 대화 (토론, 협상, 음모)
    ├── 이벤트 시스템 (랜덤 이벤트, 외부 주입)
    ├── 시간 왜곡 (시대 진행)
    └── 합의 엔진 (사실 확립)
    ↓
[하이브 마인드] → 위키 페이지, 지식 그래프
    ↓
[저장 레이어] → PostgreSQL + pgvector + Redis 캐시
    ↓
[내보내기] → JSON / CSV / Wiki / API
```

## 데이터 흐름

1. **시드 → 제네시스:** 인간이 주제/시나리오 시드를 제공
2. **제네시스 → 에이전트:** 엔진이 고유한 세계관을 가진 페르소나를 생성
3. **에이전트 → 대화:** 다중 에이전트 토론, 동맹, 갈등
4. **대화 → 하이브 마인드:** 결과의 구조화된 문서화
5. **하이브 마인드 → 저장소:** 벡터 임베딩이 포함된 영구 지식 기반
6. **저장소 → 대시보드:** 갓뷰 시각화 및 내보내기
